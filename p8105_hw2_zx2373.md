p8105_hw2_zx2373
================
Ziyan Xu
09/28/2022

``` r
library(tidyverse)
library(readxl)
```

\#Problem 1

\###Read and clean the NYC Transit dataset.

``` r
nyctransit_df = 
  read_csv(
    "NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  rename(
    ada_compliance = ada
    ) %>% 
  select(
    line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada_compliance
    ) %>% 
  mutate(
    entry = case_when(entry == "YES" ~ "TRUE", entry == "NO" ~ "FALSE"), 
    entry = as.logical(entry)
    )
```

-   This dataset contains information of the subway transformation in
    NYC, related to entrance and exit for each station. The dataset
    contains information on line, station name and location (longitude,
    latitude), routes served, entry, vending, entrance type, and ADA
    compliance.

-   Firstly, I load the dataset into nyctransit_df, clean the variable
    names and rename the ‘ada’ and select variables of interest.

-   Then I convert the entry variable from character (YES vs NO) to a
    logical variable(TRUE vs FALSE). It is not a completely tidy format,
    since there are several columns of “routes_served” that can be
    addressed into more clear format (in the following text).

-   To sum up, there are a total of 1868 rows, 19 columns in the final
    dataset.

Other related questions:

-   There are 465 distinct stations, identified both by name and by
    line.

-   There are 468 stations are ADA compliant.

-   The proportion of station entrances / exits without vending allow
    entrance is 0.3770492

\###Reformat data so that route number and route name are distinct
variables:

``` r
nyctransit_df_tidy = 
  nyctransit_df %>% 
  mutate_at(vars(route8:route11), as.character) %>% 
  pivot_longer(
    route1:route11,
    names_to = "routes_name",
    names_prefix = "route",
    values_to = "routes_number"
    ) %>% 
  drop_na(routes_number) 
```

-   There are 60 distinct stations serve the A train.

-   Of the stations that serve the A train, there are 17 ADA compliant.

\#Problem 2

\###Read the Mr. Trash Wheel dataset.

``` r
mr_df = 
  read_xlsx(
    "Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  filter(dumpster != "Grand Total") %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0)),
         month = recode(month,"Decemeber" = "December"),
         dumpster = as.integer(dumpster)) %>% 
  rename(weight = weight_tons, volume = volume_cubic_yards)
```

\###Read the Professor Trash Wheel dataset.

``` r
prof_df = 
  read_xlsx(
    "Trash-Wheel-Collection-Totals-7-2020-2.xlsx",
    sheet = "Professor Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  filter(dumpster != "Grand Total") %>%
  mutate(sports_balls = as.integer(round(sports_balls, 0))) %>% 
  rename(weight = weight_tons, volume = volume_cubic_yards)
```

\###Combine two datasets.

``` r
mr_merge_df = 
  mr_df %>% 
  mutate(source = "Mr. Trash Wheel")

prof_merge_df = 
  prof_df %>% 
  mutate(source = "Professor Trash Wheel")

merge_df = bind_rows(mr_merge_df, prof_merge_df)

view(merge_df)
show(merge_df)
```

    ## # A tibble: 524 × 15
    ##    dumps…¹ month  year date                weight volume plast…² polys…³ cigar…⁴
    ##      <dbl> <chr> <dbl> <dttm>               <dbl>  <dbl>   <dbl>   <dbl>   <dbl>
    ##  1       1 May    2014 2014-05-16 00:00:00   4.31     18    1450    1820  126000
    ##  2       2 May    2014 2014-05-16 00:00:00   2.74     13    1120    1030   91000
    ##  3       3 May    2014 2014-05-16 00:00:00   3.45     15    2450    3100  105000
    ##  4       4 May    2014 2014-05-17 00:00:00   3.1      15    2380    2730  100000
    ##  5       5 May    2014 2014-05-17 00:00:00   4.06     18     980     870  120000
    ##  6       6 May    2014 2014-05-20 00:00:00   2.71     13    1430    2140   90000
    ##  7       7 May    2014 2014-05-21 00:00:00   1.91      8     910    1090   56000
    ##  8       8 May    2014 2014-05-28 00:00:00   3.7      16    3580    4310  112000
    ##  9       9 June   2014 2014-06-05 00:00:00   2.52     14    2400    2790   98000
    ## 10      10 June   2014 2014-06-11 00:00:00   3.76     18    1340    1730  130000
    ## # … with 514 more rows, 6 more variables: glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>, source <chr>, and abbreviated variable names
    ## #   ¹​dumpster, ²​plastic_bottles, ³​polystyrene, ⁴​cigarette_butts

\#Problem 3

\###Clean the data in pols-month.csv
